<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Todo List - Edit + Completed</title>
    <style>
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            max-width: 700px; 
            margin: 40px auto; 
            padding: 30px; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: #333; 
        }
        .container { 
            background: white; 
            border-radius: 20px; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.1); 
            padding: 40px; 
        }
        h1 { 
            text-align: center; 
            color: #4a5568; 
            margin-bottom: 30px; 
        }
        .input-group { 
            display: flex; 
            gap: 15px; 
            margin-bottom: 25px; 
            flex-wrap: wrap; 
        }
        input { 
            flex: 1; 
            padding: 14px 18px; 
            border: 2px solid #e2e8f0; 
            border-radius: 12px; 
            font-size: 16px; 
            min-width: 150px; 
        }
        input:focus { 
            outline: none; 
            border-color: #667eea; 
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1); 
        }
        .btn { 
            padding: 14px 25px; 
            border: none; 
            border-radius: 12px; 
            font-size: 16px; 
            font-weight: 600; 
            cursor: pointer; 
            transition: all 0.3s; 
        }
        .btn-primary { 
            background: linear-gradient(135deg, #667eea, #764ba2); 
            color: white; 
        }
        .btn-primary:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 10px 25px rgba(102,126,234,0.3); 
        }
        .btn-secondary { 
            background: #48bb78; 
            color: white; 
        }
        .btn-danger { 
            background: #f56565; 
            color: white; 
        }
        ul { 
            list-style: none; 
            padding: 0; 
            margin: 0; 
        }
        .task-item { 
            background: #f7fafc; 
            padding: 20px; 
            margin: 15px 0; 
            border-radius: 15px; 
            border-left: 5px solid #667eea; 
            display: flex; 
            align-items: center; 
            gap: 15px; 
            transition: all 0.3s; 
        }
        .task-item.completed { 
            opacity: 0.7; 
            background: #edf2f7; 
            border-left-color: #48bb78; 
        }
        .task-item.completed .task-title { 
            text-decoration: line-through; 
            color: #718096; 
        }
        .task-title { 
            flex: 1; 
            font-weight: 500; 
            font-size: 1.1em; 
        }
        .task-id { 
            background: #ebf8ff; 
            color: #2c5282; 
            padding: 4px 10px; 
            border-radius: 20px; 
            font-size: 0.9em; 
            font-weight: 600; 
        }
        .task-actions { 
            display: flex; 
            gap: 8px; 
        }
        .stats { 
            display: flex; 
            justify-content: space-between; 
            margin-top: 25px; 
            padding-top: 20px; 
            border-top: 2px solid #e2e8f0; 
            color: #4a5568; 
            font-weight: 500; 
        }
        @media (max-width: 600px) {
            .input-group { flex-direction: column; }
            .task-item { flex-direction: column; align-items: flex-start; gap: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìù Advanced Todo List</h1>
        
        <div class="input-group">
            <input type="number" id="taskId" placeholder="Task ID" required min="1">
            <input type="text" id="taskTitle" placeholder="Enter task title..." required>
            <button class="btn btn-primary" onclick="addTask()">‚ûï Add Task</button>
        </div>

        <ul id="taskList"></ul>
        
        <div class="stats">
            <span>Total: <span id="totalTasks">0</span></span>
            <span>Completed: <span id="completedTasks">0</span></span>
        </div>
    </div>

    <script>
        let tasks = []; // Main data array

        function addTask() {
            const idInput = document.getElementById('taskId');
            const titleInput = document.getElementById('taskTitle');
            
            const id = parseInt(idInput.value);
            const title = titleInput.value.trim();
            
            // Validation
            if (!id || id < 1 || !title) {
                alert('Please enter valid ID (number > 0) and title!');
                return;
            }
            
            if (tasks.find(task => task.id === id)) {
                alert('Task ID already exists!');
                return;
            }
            
            // Add new task
            tasks.push({
                id: id,
                title: title,
                completed: false
            });
            
            // Clear inputs
            idInput.value = '';
            titleInput.value = '';
            
            renderTasks();
            updateStats();
        }

        function toggleComplete(index) {
            tasks[index].completed = !tasks[index].completed;
            renderTasks();
            updateStats();
        }

        function editTask(index) {
            const newTitle = prompt('Edit task:', tasks[index].title);
            if (newTitle && newTitle.trim()) {
                tasks[index].title = newTitle.trim();
                renderTasks();
            }
        }

        function deleteTask(index) {
            if (confirm('Delete this task?')) {
                tasks.splice(index, 1); // splice removes from original
                renderTasks();
                updateStats();
            }
        }

        function renderTasks() {
            const taskList = document.getElementById('taskList');
            
            // Clear and re-render (single source of truth)
            taskList.innerHTML = tasks.map((task, index) => `
                <li class="task-item ${task.completed ? 'completed' : ''}">
                    <div>
                        <span class="task-id">ID: ${task.id}</span>
                        <div class="task-title">${task.title}</div>
                    </span>
                    <div class="task-actions">
                        <button class="btn btn-secondary" onclick="toggleComplete(${index})" title="Toggle Complete">
                            ${task.completed ? '‚Ü∂ Undo' : '‚úÖ Complete'}
                        </button>
                        <button class="btn" onclick="editTask(${index})" title="Edit">‚úèÔ∏è</button>
                        <button class="btn btn-danger" onclick="deleteTask(${index})" title="Delete">üóëÔ∏è</button>
                    </div>
                </li>
            `).join('');
        }

        function updateStats() {
            const total = tasks.length;
            const completed = tasks.filter(task => task.completed).length;
            
            document.getElementById('totalTasks').textContent = total;
            document.getElementById('completedTasks').textContent = completed;
        }

        // Keyboard shortcuts
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addTask();
        });

        // Initial render
        renderTasks();
        updateStats();
    </script>
</body>
</html>
